<script>
	import {fade} from 'svelte/transition';

	const actions = [
		{
			name: 'Blop It!',
			passive: `m 140.60714,54.806548 c -3.85292,2.911097 -7.04641,5.531267 -9.67713,7.952775 -3.09913,2.852675 -5.41723,5.42964 -7.11233,7.881739 -3.21806,4.655211 -4.19072,8.860383 -3.99923,13.647628 0.18074,4.518566 0.44792,8.172846 1.33879,11.252144 0.97216,3.360252 2.68702,6.035816 5.84276,8.402616 2.56418,1.92314 4.72065,4.11807 6.72873,6.15265 2.72796,2.76397 5.18204,5.23199 8.01234,6.32057 2.39293,0.92036 6.04084,2.10964 10.02699,2.73841 4.19908,0.66235 8.77349,0.70271 12.65158,-0.84853 3.58423,-1.43369 6.4887,-2.78242 9.07599,-4.61019 2.86958,-2.0272 5.349,-4.64369 7.93294,-8.61898 2.49914,-3.84483 4.1183,-7.005233 5.10613,-10.02823 0.95439,-2.920676 1.31946,-5.71309 1.31946,-8.870579 0,-3.056325 0.0855,-6.198163 -0.39425,-8.978094 -0.52889,-3.064577 -1.74475,-5.68934 -4.51944,-7.274881 -1.96579,-1.123311 -4.08807,-2.872567 -6.21182,-4.763328 -3.5931,-3.198927 -7.1904,-6.802902 -10.04115,-8.465839 -1.98215,-1.156252 -4.83051,-2.312503 -7.69336,-3.153302 -3.68817,-1.083189 -7.4004,-1.642828 -9.31557,-1.004437 -3.40179,1.13393 -5.66964,0.755952 -9.07143,2.267858 z`,
			active: `m 140.60714,54.806548 c -8.81899,5.933925 -14.62997,-13.800097 -21.12069,-9.968276 -9.93108,5.862843 12.50382,16.225454 4.33123,25.80279 -3.6735,4.304918 -13.80697,4.850916 -14.1473,13.431712 -0.29653,7.476696 10.56391,8.398226 11.48686,11.46806 3.34724,11.133236 -13.88296,19.316016 -9.4873,24.380416 4.78625,5.51442 20.05071,-11.85973 22.05879,-9.82515 2.72796,2.76397 3.88654,13.00498 6.71684,14.09356 2.39293,0.92036 7.29585,-4.76822 11.32249,-5.03458 12.83573,-0.84906 9.19398,16.25336 16.32216,13.18603 7.35154,-3.16346 -0.18368,-13.65551 5.40541,-18.64475 7.78606,-6.95042 16.57665,0.32238 19.16059,-3.65291 2.49914,-3.84483 -7.10935,-11.971303 -6.12152,-14.9943 0.95439,-2.920676 11.47413,-2.265375 11.46753,-8.654663 -0.0101,-9.771218 -8.46707,-0.869068 -10.54232,-9.19401 -3.10804,-12.468039 9.05106,-13.24641 2.82171,-17.422946 -1.88054,-1.260834 -10.09324,2.694776 -12.25747,0.850495 -7.04776,-6.005838 0.15075,-15.223637 -2.7,-16.886574 -8.24372,-4.826829 -13.46897,10.648606 -16.33001,9.801675 -5.84733,-1.730938 -2.16641,-10.607153 -8.23599,-10.288837 -5.49345,0.288101 -2.86273,8.097105 -10.15101,11.552258 z`,
			isActive: false			
		}, {
			name: 'Zap It!',
			passive: '',
			active: '',
			isActive: false
		}, {
			name: 'Chunk It!',
			passive: '',
			active: '',
			isActive: false
		}, {
			name: 'Plurp It!',
			passive: 'M25.487 137.368c5.474 4.619 15.395 6.158 24.632 2.053 9.237-4.106 14.027-12.145 11.803-15.908-2.224-3.764-10.606-8.382-21.553-7.869-10.948.513-22.58 4.619-25.145 11.803-2.566 7.184 17.105 1.71 22.921-1.71 5.816-3.422 11.46-10.777 10.092-14.37-1.368-3.591-14.71-8.039-20.355-8.38-5.645-.343-15.908 2.052-13.513 6.841 2.394 4.79 11.46 3.592 14.881 1.54 3.421-2.053 8.895-6.33 7.185-9.58s-7.014-7.355-10.093-5.473c-3.079 1.882-2.394 2.395-.342 4.276 2.053 1.882 9.922 0 11.119-1.881 1.197-1.882 2.224-4.96-3.08-7.185-5.302-2.223-9.578.685-7.525 2.566 2.052 1.882 4.789 2.053 6.329 1.369 1.539-.685 5.986-5.987 2.736-8.382-3.25-2.395-6.67-1.197-6.329.342.343 1.54 8.211 4.105 10.777 2.566 2.566-1.54 5.303-4.79 4.105-6.5-1.197-1.71-5.987-4.277-5.987-4.277s3.935 3.935 3.25 5.303c-.684 1.369-1.026 4.96-3.42 4.277-2.396-.685-4.106.684-5.304-1.198-1.197-1.881 1.369-2.908 2.908-1.71 1.54 1.197.171 5.473-1.197 7.013s-3.25 6.842-6.671 4.96c-3.421-1.881-8.553-5.131-5.132-6.5 3.421-1.368 5.303-2.223 7.869-1.197 2.566 1.026 7.526 4.447 6.158 7.013-1.369 2.566.684 4.277-6.671 4.448-7.356.17-8.895-1.882-8.04-3.935.855-2.052 7.184-1.881 10.092.171 2.908 2.053 6.33.856 6.5 5.303.171 4.448-1.197 8.553-5.473 10.092-4.277 1.54-13.856 7.185-18.816 3.421-4.961-3.763-6.5-10.605-1.882-11.631 4.618-1.027 13.342-2.224 18.474-.342 5.132 1.881 5.816 1.881 9.408 5.473 3.592 3.593 4.447 8.895.513 12.145s-15.908 4.448-19.5 4.448c-3.592 0-7.698.17-8.04-2.908-.342-3.08 4.619-9.066 10.092-9.75 5.474-.685 10.948-2.053 15.395-1.369 4.448.684 15.909 1.369 18.645 3.08 2.737 1.71 3.593 10.263.514 13.341-3.08 3.08-27.37 10.777-29.422 10.606-2.053-.171-2.908-2.395-2.908-2.395z',
			active: 'm 25.487182,137.36813 c 5.473759,4.61849 15.394943,6.15798 24.631907,2.05266 9.236966,-4.10532 14.026504,-12.1449 11.80279,-15.90811 -2.223715,-3.7632 8.588403,-11.95263 -2.359111,-11.43946 -10.947516,0.51316 -33.292072,2.16346 -35.857896,9.34777 -2.565823,7.18431 8.624507,7.73651 14.440374,4.31541 5.815867,-3.4211 25.298075,-8.99099 30.178784,-14.81498 2.469027,-2.94621 14.526358,-13.842357 8.211992,-17.978592 -4.73059,-3.098781 -64.562178,12.095922 -62.167409,16.885462 2.394769,4.78954 11.460679,3.59216 14.881778,1.5395 3.421097,-2.05266 6.663017,-14.586841 13.433452,-18.283249 3.22356,-1.759945 21.156675,-9.907072 20.930312,-13.508372 C 63.213371,73.19997 55.416606,77.060892 51.666486,79.388867 51.487307,80.8241 37.707003,89.878507 38.904388,87.996899 40.101773,86.115296 34.039929,91.525417 34.039929,91.525417 28.290106,91.581092 45.303018,80.763405 44.814585,78.022005 43.519486,70.753072 19.02794,92.12659 19.674699,82.068649 38.845714,73.796182 38.829466,71.841236 35.579423,69.446466 32.329379,67.051699 24.444603,72.712758 21.885325,71.350865 21.111515,68.203499 33.798896,66.412462 34.000886,63.427049 34.558058,55.19204 29.4835,51.049261 28.286118,49.338711 27.088733,47.628162 16.719599,42.160948 16.719599,42.160948 c 0,0 6.61247,2.595162 10.391927,10.659115 0.649294,1.385351 6.338736,5.183777 2.604863,10.971887 -1.350119,2.092904 -16.928621,2.411843 -14.006871,8.622703 1.987806,4.225545 16.768124,-0.45291 18.307618,0.744472 1.539494,1.197385 -15.089085,1.945321 -18.159355,8.575539 -3.086511,6.665291 0.09771,5.279909 1.363477,7.415616 1.990659,3.358815 20.46115,-9.595323 23.882248,-10.963764 3.421098,-1.368438 -8.516042,8.590408 -12.664384,12.416828 -2.943509,2.715084 -6.561426,-2.469585 -13.4822,3.888678 -1.795554,1.649614 -6.6808463,1.598166 2.033028,4.224248 6.25885,4.63473 40.875135,-18.843579 43.515879,-18.887582 2.223406,-0.03705 -4.052922,8.426694 -5.75381,11.55343 -3.787582,6.962702 -5.49971,4.426214 -8.899598,7.311356 -3.393522,2.879736 -6.553796,8.329566 -10.830169,9.869056 -4.276373,1.5395 -11.846792,5.39883 -16.807385,1.63562 -4.960593,-3.7632 9.569148,-3.24033 12.848528,-4.48985 4.421096,-1.68453 7.762687,-3.11644 13.117519,-5.25215 9.37214,-3.028437 20.992367,-3.921172 24.58452,-0.32902 3.592152,3.59216 -12.291359,13.35853 -16.225623,16.60857 -3.934261,3.25005 -16.131289,7.79519 -19.723443,7.79519 -3.592153,0 -4.572898,1.06379 -4.915007,-2.01519 -0.34211,-3.07899 6.627136,-12.1905 12.100893,-12.87471 5.473758,-0.68422 9.831595,-2.72221 14.279024,-2.03799 4.447428,0.68422 16.274649,0.55164 17.529067,3.52535 4.299166,10.19153 -10.914796,14.95016 -13.993784,18.02915 -3.078988,3.07899 -27.368785,10.77646 -29.421446,10.6054 -2.052658,-0.17105 -2.907933,-2.39477 -2.907933,-2.39477 z',
			isActive: false
		}
	];

	let currentAction = '';
	let round = 0;
	let commandList = [];
	let note = ''
	
	function actionClick(index) {
		actions[index].isActive = true;
		
		setTimeout(() => {actions[index].isActive = false}, 333);


		if (round === 0 || commandList.length === 0) {return}
		
		if (index === commandList[0]) {
			commandList.shift();
			commandList = commandList
			 
			if (commandList.length === 0) {
				newRound();
			}
		} else {
			note= 'Missed it! You gotta start over';
			newGame();
		}
	}
	
	function newGame() {
		round = 0;
	}

	function newRound() {
		note = '';
		round += 1;
		makeCommandList(round);
	}
	
	function makeCommandList(count) {
		commandList = [];
		
		for (let i = 0; i < count; i++) {
			commandList = commandList.concat([parseInt(Math.random() * 4, 10)])
		}
	} 
	
	//function togglePaused() {
	//	!gamePaused ? gamePaused = true : gamePaused = false;
	//}
	
</script>

<style>
	.body {
		background-color: #e0e0e0;
	}
	.action-btn {
		text-transform: uppercase;
		font-weight: 600;
		padding: .75em 1em;
		border-radius: .5em;
		border: none;
		color: #FFF;
		font-family: Impact;
		font-size: 1.5em;
	}
	.action-btn + .action-btn {margin-left: .5em}
	.action-btn-0 {background-color: #FF33FF}
	.action-btn-1 {background-color: #3355FF}
	.action-btn-2 {background-color: #FFFF33; color: #111111}
	.action-btn-3 {background-color: #33FFFF; color: #111111}

	.round-counter {
		background-color: green;
		color: white;
		font-family: Impact;
		display: flex;
		flex-direction: column;
		width: 6em;
		text-align: center;
		padding-top: .5em;
		position: absolute;
		right: 1em;
	}
	.round-number {
		font-size: 3em;
		margin-bottom: .125em;
		
	}
	.start-button {
		display: block;
		margin-bottom: 0;
		border-radius: 0;
	}
	.game-board {
		width: 100%;
		height: 100%;
		stroke-width: .5;
		overflow: visible;
	}
	.zap-it-hit-box {
		z-index: 10;
	}

</style>

<h1>Blop It!</h1>

	<aside class="round-counter">
		Round<span class="round-number">{round}</span>
		{#if !round}
			<button class="start-button" on:click={() => newRound()}>
				Start Game
			</button>
		{/if}
	</aside>

<ul>
	{#each commandList as actionIndex, itemCount}
		<li class="command" in:fade="{{delay: itemCount * 1000}}" >{actions[actionIndex].name}</li>
	{/each}
</ul>

<svg class="game-board" xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 211.667 158.75">
	<path class="zap-right" d="M119.447 43.715c-6.441-2.274-6.978-6.152-5.77-9.361 1.208-3.21 8.32-6.954 5.905-11.902-2.416-4.947-8.992-8.825-8.992-8.825s-4.965 1.337-7.246-1.873c-2.282-3.209-1.88-11.5 4.965-9.494 6.844 2.006 4.831 9.628 4.831 9.628s6.442 4.547 8.589 11.367c2.147 6.82 2.013 20.727-2.282 20.46z" fill="#ffbe00" />
	{#if actions[1].isActive}
		<path d="M 71.691938,10.488345 V 6.2911905 l 5.444959,11.2302245 -0.226873,-10.3227318 1.588111,4.5374648 0.34031,-13.6123937 2.722481,9.982422 1.361239,6.1255767 V 8.5599227 l 0.113434,-6.9196334 1.134367,3.1762251 0.113437,-5.8987038 1.928424,9.1883657 1.247801,-12.8183374 1.134367,6.0121406 0.226872,-4.7643378 4.08372,18.0364213 -1.134367,-10.0958584 1.701549,3.6299717 -0.453748,-12.7049007 1.814987,9.9824221 1.134366,-5.6718308 1.020929,8.0539996 1.134367,-6.5793236 0.907492,4.8777742 1.701548,-7.9405628 0.22688,8.8480559 1.2478,-5.1046477 0.79405,4.6509013 -0.90749,-2.7224789 -1.2478,6.9196331 -0.68062,-6.9196331 -0.453746,7.8271261 -1.701551,-6.35245 -1.02093,5.898704 L 95.740502,3.5687119 95.513627,8.3330496 93.812078,4.5896413 94.265826,10.942092 92.791149,8.6733593 94.038953,18.428908 89.728362,1.7537259 89.161177,6.5180638 87.459628,0.27904998 86.552137,10.828655 84.737151,3.7955849 84.623713,7.1986832 83.489347,4.362768 83.943094,18.202035 78.157826,1.2999795 79.859374,13.210824 77.363769,10.148035 77.817516,20.924513 72.145685,8.2196129 Z" fill="#00ffff" />
	{/if}
	<g class="chunk-it" on:click={() => actionClick(2)} transform="rotate({actions[2].isActive === true ? `45 90 106` : 0 })">
		<path d="M62.264 109.144l21.553 23.092 27.71-16.763-19.842-20.355z" fill="#37c8ab"/>
		<path d="M111.528 115.473l-.403-17.955L97.14 79.753l-5.455 15.365z" fill="#00aad4"/>
		<path d="M91.685 95.118l-29.421 14.026 14.54-24.119 20.336-5.272z" fill="#80ffe6"/>
	</g>
	<path class="body" d="M178.405 94.494c4.157-21.545-71.438-73.705-81.643-63.5-10.205 10.205 40.443 40.066 31.75 58.964-8.694 18.9-108.101 38.932-106.59 49.515 1.513 10.584 135.694 7.56 156.483-44.979z" fill="#93aca7" />
	<path class="zap-it-left" d="M112.53 52.75c-4.026 5.953-16.683 1.324-28.764-9.259-12.081-10.582-10.93-21.164-11.506-23.81l-.575-2.646s-3.527 2.51-6.404-2.78c-1.747-3.978 1.768-7.42 4.762-6.672 2.994.748 5.468 2.095 4.817 5.238-.651 3.143-1.042 3.143-1.042 3.143s2.474 19.605 12.237 24.544 28.609.84 26.476 12.243z" fill="#ffbe00" />
	<path class= "plurp-it" d="{actions[3].isActive === true ? actions[3].active : actions[3].passive}" fill="purple" />
	<g class="blop-it" on:click="{() => actionClick(0)}">
		<path d="{actions[0].isActive === true ? actions[0].active : actions[0].passive}" fill="maroon"/>
		<path d="M148.923 60.854c-13.986 9.072-26.459 11.34-23.435 28.726 3.024 17.387 18.143 24.19 30.238 23.813 12.095-.378 26.837-2.646 27.97-22.3 1.134-19.656-8.315-24.947-15.875-28.349-7.56-3.402-12.473-4.158-18.898-1.89z" fill="#d40000" />
		<path d="M128.53 77.333l4.983 19.5 8.825-5.266-8.683-3.132 2.99-5.978zm1.994 3.416l4.27 2.135-1.993 4.128zm2.562 9.536l6.69 1.566-5.552 2.704z" fill="#fff" />
		<path d="M137.363 72.9l7.216 21.901 13.292-7.3-11.773 1.991z" fill="#fff" />
		<path d="M150.593 66.515l-4.84 15.373 14.092 5.266 6.12-11.53zm2.99 5.551l7.543 5.836-2.277 3.559-7.971-1.566z" fill="#f9f9f9" />
		<path d="M166.82 67.654l.57 18.788 1.707-10.675 8.113-3.416zm.996 1.566l6.12 3.273-5.835 1.993z" fill="#fff" />
		<path d="M151.732 97.402l1.708 13.523 3.558-.427zM149.882 95.267l23.058-7.828-9.11 7.117 2.847 15.372-5.693-14.518zM175.218 86.015s1.85 13.523 2.135 12.953c.284-.57.996-15.8.996-15.8zM177.068 100.819l-.854 3.273 1.85-1.28z" fill="#fff" />
	</g>
	<circle class="zap-it-hit-box" on:click="{() => actionClick(1)}" cx="94" cy="22" r="33" fill="#FFF" stroke="none" opacity="0" />
	<path class="plurp-it-hit-box" on:click="{() => actionClick(3)}" d="m 50.662726,140.44893 c 11.828742,-9.15054 12.051926,-9.59691 12.051926,-9.59691 L 62.491468,119.91601 39.949903,102.73086 39.726719,92.464405 46.868601,84.652971 37.494882,76.171985 20.309728,92.018037 7.1418822,108.53364 l 6.4723308,19.64017 3.124573,5.5796 11.159193,7.36507 14.953315,2.45502 z" fill="#FFF" stroke="none" opacity="0"/>
</svg>

<!-- {#each actions as action, index}
	<button class={'action-btn action-btn-' + (index)} on:click="{() => actionClick(index)}">
		{action.name}
	</button>
{/each} -->

<p class="note">
	{note}
</p>


